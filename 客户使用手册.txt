═══════════════════════════════════════════════════════════
  织梦AI大模型 - 用户使用手册
  AI语音克隆 · 智能口型同步 · 专业级解决方案
═══════════════════════════════════════════════════════════

【快速开始】

1. 双击 "启动应用.vbs" 启动程序
2. 等待10-30秒，程序窗口会自动打开
3. 按照界面提示完成语音合成和口型同步


【功能介绍】

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
  🎬 工作台 - 单个任务处理
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

步骤1：语音合成
--------------
1. 在"输入文本"框中粘贴或输入要合成的文字
2. 上传"参考音频"（3-10秒，用于克隆音色）
   - 支持格式：WAV、MP3、M4A
   - 建议：清晰人声，无背景音乐
3. （可选）展开"高级设置"调整参数
4. 点击"开始语音合成"按钮
5. 等待合成完成，可以试听结果

高级设置说明：
- 词语多样性：越高输出越随机（建议 0.7-0.9）
- 候选词数量：限制每步候选词（建议 20-50）
- 语气活跃度：越高语气越有变化（建议 0.8）
- 精确搜索强度：越高越精确但更慢（建议 1-5）
- 避免重复程度：越高越不会重复相同词语（建议 10）
- 最大音频长度：更长文本需要更大数值（建议 1000-2000）

情感控制：
- 与音色参考音频相同：使用参考音频的情感
- 使用情感参考音频：上传单独的情感音频，可调整混合强度
- 使用情感向量控制：手动调整8个情感维度
- 使用情感描述文本控制：输入文字描述情感（如"开心"、"悲伤"）

步骤2：口型同步
--------------
1. 上传"人物视频"
   - 支持格式：MP4、AVI、MOV
   - 建议：正面清晰人脸，光线充足
2. 选择音频来源：
   - "使用已合成的语音"：自动使用步骤1的结果
   - "上传自定义音频"：使用其他音频文件
3. 点击"生成口型同步视频"按钮
4. 等待生成完成（通常需要1-5分钟）

步骤3：查看结果
--------------
- 生成完成后，视频会自动显示在右侧
- 可以直接播放预览
- 视频自动保存在 unified_outputs 文件夹


━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
  📁 合成历史 - 管理已生成的视频
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

功能说明：
- 🔄 刷新列表：更新历史记录
- 📂 打开文件夹：直接打开输出目录
- 🗑 清空历史：清空记录或删除文件

查看历史视频：
1. 在下拉列表中选择记录
2. 视频会自动在右侧播放
3. ✅ 表示文件存在，❌ 表示文件已删除

清空历史选项：
- 🗂 仅移除记录：清空列表，保留磁盘文件
- 🗑 连同文件删除：彻底删除所有视频文件


━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
  ⚡ 批量任务 - 一次处理多个任务
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

使用场景：
- 需要为多段文字生成视频
- 使用同一个人物视频，配不同音频
- 批量处理，节省时间

操作步骤：

1. 设置公共视频（可选）
   - 如果所有任务使用同一个人物视频，在右上角上传
   - 也可以为每个任务单独上传视频

2. 添加任务
   - 填写任务名称（可留空自动编号）
   - 选择音频来源：
     * 文字合成语音：输入文字+上传参考音色
     * 上传音频文件：直接上传音频
   - 选择视频来源：
     * 使用公共视频：使用右上角上传的视频
     * 上传专属视频：为此任务单独上传
   - 点击"加入队列"

3. 重复步骤2，添加多个任务

4. 设置批次名称（可选）
   - 输入文件夹名，方便管理
   - 留空则使用时间戳

5. 点击"开始批量生成"
   - 程序会依次处理所有任务
   - 可以在任务列表中查看进度
   - 完成后所有视频保存在同一个文件夹

管理队列：
- 点击任务行末的 ✕ 可删除单个任务
- 点击"清空队列"可删除所有任务


【操作日志】

- 位置：窗口底部
- 默认收起，点击可展开
- 显示所有操作记录和错误信息
- 绿色 ✓ 表示成功，红色 ✗ 表示失败


【窗口控制】

最小化：
- 点击窗口右上角的最小化按钮
- 程序会最小化到系统托盘（任务栏右下角）
- 双击托盘图标可恢复窗口

退出程序：
- 点击窗口右上角的关闭按钮
- 选择"最小化到通知区域"或"退出程序"
- 勾选"记住选择"下次不再提示


【输出文件】

位置：unified_outputs 文件夹

文件命名：
- 语音合成：tts_时间戳.wav
- 口型同步：ls_时间戳.mp4
- 批量任务：批次文件夹/任务编号.mp4

文件管理：
- 可以直接在文件夹中查看、复制、移动文件
- 删除文件不影响程序运行
- 历史记录中会显示文件是否存在


【性能优化建议】

1. 硬件配置
   - 使用NVIDIA显卡可大幅提升速度
   - 内存建议32GB以上
   - SSD固态硬盘可加快模型加载

2. 参数调整
   - 降低"精确搜索强度"可加快合成速度
   - 减少"最大音频长度"可节省内存
   - 短视频（<30秒）处理更快

3. 批量任务
   - 使用公共视频可节省处理时间
   - 避免同时运行其他大型程序
   - 建议分批处理，每批10-20个任务


【注意事项】

1. 音频质量
   ✓ 使用清晰的人声录音
   ✓ 避免背景噪音和音乐
   ✓ 录音时长3-10秒最佳
   ✗ 不要使用变声、混响等效果

2. 视频质量
   ✓ 正面清晰人脸
   ✓ 光线充足，避免逆光
   ✓ 人脸占画面1/3以上
   ✗ 避免侧脸、遮挡、模糊

3. 文本内容
   ✓ 使用标准中文或英文
   ✓ 添加标点符号增强语气
   ✓ 长文本建议分段处理
   ✗ 避免特殊符号和表情

4. 程序使用
   ✓ 等待模型加载完成再操作
   ✓ 生成过程中不要关闭程序
   ✓ 定期清理输出文件夹
   ✗ 不要同时运行多个实例


【故障排除】

问题：程序启动失败
解决：
1. 查看 gradio_error.log 文件
2. 确认路径不包含中文和空格
3. 重新运行"安装依赖.bat"
4. 检查显卡驱动是否最新

问题：语音合成失败
解决：
1. 检查参考音频格式和质量
2. 减少文本长度重试
3. 降低"最大音频长度"参数
4. 查看操作日志中的错误信息

问题：口型同步失败
解决：
1. 确认视频中有清晰人脸
2. 尝试转换视频格式为MP4
3. 检查音频文件是否正常
4. 减少视频时长重试

问题：生成速度很慢
解决：
1. 确认使用NVIDIA显卡
2. 关闭其他占用GPU的程序
3. 降低视频分辨率
4. 调低"精确搜索强度"参数

问题：内存不足
解决：
1. 关闭其他程序释放内存
2. 减少"最大音频长度"
3. 分批处理批量任务
4. 升级内存到32GB


【快捷键】

F12：开启/关闭开发者工具（需在.env中设置DEBUG_MODE=true）


【联系支持】

如遇到无法解决的问题，请联系技术支持并提供：
1. gradio_error.log 文件
2. 操作日志截图
3. 系统配置信息
4. 详细问题描述


═══════════════════════════════════════════════════════════
  版本：v2.0 专业版
  更新日期：2026-02-19
  
  祝您使用愉快！
═══════════════════════════════════════════════════════════
