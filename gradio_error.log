[MODEL] 正在加载 IndexTTS2 声学模型...
[MODEL] PyTorch CUDA可用: True
[MODEL] GPU设备: NVIDIA GeForce RTX 3080
[MODEL] CUDA版本: 12.8
>> GPT weights restored from: D:\ZhiMoAi_shuzi\_internal_tts\checkpoints\gpt.pth
GPT2InferenceModel has generative capabilities, as `prepare_inputs_for_generation` is explicitly overwritten. However, it doesn't directly inherit from `GenerationMixin`. From \U0001f449v4.50\U0001f448 onwards, `PreTrainedModel` will NOT inherit from `GenerationMixin`, and this model will lose the ability to call `generate` and other related functions.
  - If you're using `trust_remote_code=True`, you can get rid of this warning by loading the model with an auto class. See https://huggingface.co/docs/transformers/en/model_doc/auto#auto-classes
  - If you are the owner of the model architecture code, please modify your model class such that it inherits from `GenerationMixin` (after `PreTrainedModel`, otherwise you'll get an exception).
  - If you are not the owner of the model architecture class, please contact the model code owner to update it.
>> Failed to load custom CUDA kernel for BigVGAN. Falling back to torch.
TypeError("unsupported operand type(s) for +: 'NoneType' and 'str'")
>> semantic_codec weights restored from: D:\ZhiMoAi_shuzi\_internal_tts\checkpoints\hf_cache\models--amphion--MaskGCT\snapshots\265c6cef07625665d0c28d2faafb1415562379dc\semantic_codec\model.safetensors
cfm loaded
length_regulator loaded
gpt_layer loaded
>> s2mel weights restored from: D:\ZhiMoAi_shuzi\_internal_tts\checkpoints\s2mel.pth
>> campplus_model weights restored from: D:\ZhiMoAi_shuzi\_internal_tts\checkpoints\hf_cache\models--funasr--campplus\snapshots\fb71fe990cbf6031ae6987a2d76fe64f94377b7e\campplus_cn_common.bin
Loading weights from nvidia/bigvgan_v2_22khz_80band_256x
Removing weight norm...
>> bigvgan weights restored from: nvidia/bigvgan_v2_22khz_80band_256x
>> TextNormalizer loaded
>> bpe model loaded from: D:\ZhiMoAi_shuzi\_internal_tts\checkpoints\bpe.model
[MODEL] 模型加载完成，正在预热引擎...
>> starting inference...
Use the specified emotion vector
The following generation flags are not valid and may be ignored: ['length_penalty']. Set `TRANSFORMERS_VERBOSITY=info` for more details.
Passing a tuple of `past_key_values` is deprecated and will be removed in Transformers v4.53.0. You should pass an instance of `Cache` instead, e.g. `past_key_values=DynamicCache.from_legacy_cache(past_key_values)`.
  0%|          | 0/25 [00:00<?, ?it/s]  4%|         | 1/25 [00:00<00:03,  6.67it/s] 28%|       | 7/25 [00:00<00:00, 31.52it/s] 44%|     | 11/25 [00:00<00:00, 25.25it/s] 56%|    | 14/25 [00:00<00:00, 24.04it/s] 68%|   | 17/25 [00:00<00:00, 22.91it/s] 80%|  | 20/25 [00:00<00:00, 22.15it/s] 92%|| 23/25 [00:01<00:00, 21.90it/s]100%|| 25/25 [00:01<00:00, 22.38it/s]
torch.Size([1, 19712])
>> gpt_gen_time: 1.10 seconds
>> gpt_forward_time: 0.01 seconds
>> s2mel_time: 1.13 seconds
>> bigvgan_time: 0.32 seconds
>> Total inference time: 4.17 seconds
>> Generated audio length: 0.89 seconds
>> RTF: 4.6602
>> wav file saved to: D:\ZhiMoAi_shuzi\unified_outputs\_warmup.wav
[MODEL] 引擎预热完成，首次合成将直接输出
[MODEL] OK
[LS-SERVER] 常驻推理服务将在首次视频生成时懒启动
[TextExtractor] 后台线程已启动
[TextExtractor] WebSocket 连接已在后台初始化
[TextExtractor] WebSocket 连接成功
[快手发布] [步骤1：启动浏览器] 正在初始化 Chrome 驱动...
[快手发布] 使用打包驱动: D:\ZhiMoAi_shuzi\chromedriver\chromedriver.exe
[快手发布] 使用本地 ChromeDriver 初始化浏览器
[快手发布] 浏览器初始化成功
[快手发布] [步骤1：浏览器启动成功] Chrome 已就绪
[快手发布] [步骤2：检查登录状态] 正在访问快手创作者平台...
[快手发布] == 检查登录状态 ==
[快手发布] 当前页面 URL: https://cp.kuaishou.com/article/publish/video?origin=www.kuaishou.com&source=NewReco
[快手发布] 检测到页面含'立即登录'，需要用户登录
[快手发布] [步骤2：需要登录] 检测到快手登录页面，请在浏览器中完成登录
[快手发布] 请登录快手 请在浏览器中完成登录（支持扫码/手机验证码）
[快手发布] == 等待用户登录 ==
[快手发布] [OK] URL在发布页且找到上传入口，登录成功!
[快手发布] 登录成功! 已就绪
[快手发布] [步骤2：登录成功 [OK]] 已成功登录快手创作者平台
[快手发布] [步骤3：开始上传视频] 请勿操作浏览器窗口
[快手发布] == 上传视频文件 ==
[快手发布] [10%] 查找上传入口...
[快手发布] 找到上传 input: input[type='file'][accept*='video']
[快手发布] [15%] 正在上传视频文件...
[快手发布] 视频文件已发送: C:\Users\111\AppData\Local\Temp\gradio\3a86b5f5dd3958773c2c98aca40a28b00d8e703b7fec04e5b56ad7d121cad4f1\subtitled_1771891096.mp4
[快手发布] [步骤4：等待上传完成] 视频正在处理中...
[快手发布] == 等待视频上传完成 ==
[快手发布] [20%] 等待视频上传完成...
[快手发布] [OK] 视频上传完成
[快手发布] [40%] 视频上传完成
[快手发布] [步骤5：填写标题和话题] 正在填写作品信息
[快手发布] == 填写标题和话题 ==
[快手发布] [50%] 正在填写标题和话题...
[快手发布] [OK] 使用JS填写内容: 挑嘴猫秒光盘的秘密！这粮性价比高到离谱 #猫粮推荐 #养猫必备 #性价比好物 #猫咪挑食 #宠物食品...
[快手发布] [70%] 标题和话题已填写
[快手发布] [步骤6：点击发布] 正在发布视频
[快手发布] == 点击发布 ==
[快手发布] [85%] 正在发布视频...
[快手发布] 找到发布按钮(class含_button-primary)
[快手发布] [OK] 已点击发布按钮
[快手发布] [100%] 发布成功！
